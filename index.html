<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .calculator {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            padding: 25px;
            width: 100%;
            max-width: 400px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .display {
            background: #f8f9fa;
            border-radius: 15px;
            margin-bottom: 20px;
            padding: 20px;
            text-align: right;
            position: relative;
            overflow: hidden;
        }

        .display-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 98%, rgba(255, 255, 255, 0.3) 100%);
            pointer-events: none;
        }

        .previous-operand {
            font-size: 1.2rem;
            color: #6c757d;
            min-height: 30px;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .current-operand {
            font-size: 2.5rem;
            font-weight: bold;
            color: #343a40;
            min-height: 60px;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .buttons-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }

        button {
            border: none;
            outline: none;
            cursor: pointer;
            font-size: 1.3rem;
            font-weight: 600;
            padding: 20px;
            border-radius: 15px;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        button:hover::before {
            left: 100%;
        }

        .number-btn {
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            color: #495057;
            box-shadow: 5px 5px 15px #d1d9e6, -5px -5px 15px #ffffff;
        }

        .number-btn:hover {
            background: linear-gradient(145deg, #e9ecef, #dee2e6);
            transform: translateY(-2px);
            box-shadow: 8px 8px 20px #d1d9e6, -8px -8px 20px #ffffff;
        }

        .number-btn:active {
            transform: translateY(1px);
            box-shadow: 3px 3px 10px #d1d9e6, -3px -3px 10px #ffffff;
        }

        .operation-btn {
            background: linear-gradient(145deg, #007bff, #0056b3);
            color: white;
            box-shadow: 5px 5px 15px #0056b340, -5px -5px 15px #007bff40;
        }

        .operation-btn:hover {
            background: linear-gradient(145deg, #0056b3, #004085);
            transform: translateY(-2px);
            box-shadow: 8px 8px 20px #0056b340, -8px -8px 20px #007bff40;
        }

        .operation-btn:active {
            transform: translateY(1px);
            box-shadow: 3px 3px 10px #0056b340, -3px -3px 10px #007bff40;
        }

        .equals-btn {
            background: linear-gradient(145deg, #28a745, #1e7e34);
            color: white;
            grid-column: span 2;
            box-shadow: 5px 5px 15px #1e7e3440, -5px -5px 15px #28a74540;
        }

        .equals-btn:hover {
            background: linear-gradient(145deg, #1e7e34, #155d27);
            transform: translateY(-2px);
            box-shadow: 8px 8px 20px #1e7e3440, -8px -8px 20px #28a74540;
        }

        .equals-btn:active {
            transform: translateY(1px);
            box-shadow: 3px 3px 10px #1e7e3440, -3px -3px 10px #28a74540;
        }

        .clear-btn {
            background: linear-gradient(145deg, #dc3545, #bd2130);
            color: white;
            grid-column: span 2;
            box-shadow: 5px 5px 15px #bd213040, -5px -5px 15px #dc354540;
        }

        .clear-btn:hover {
            background: linear-gradient(145deg, #bd2130, #a71e2a);
            transform: translateY(-2px);
            box-shadow: 8px 8px 20px #bd213040, -8px -8px 20px #dc354540;
        }

        .clear-btn:active {
            transform: translateY(1px);
            box-shadow: 3px 3px 10px #bd213040, -3px -3px 10px #dc354540;
        }

        .decimal-btn {
            background: linear-gradient(145deg, #6c757d, #545b62);
            color: white;
        }

        .decimal-btn:hover {
            background: linear-gradient(145deg, #545b62, #4a5056);
            transform: translateY(-2px);
        }

        .footer {
            margin-top: 20px;
            text-align: center;
            color: #6c757d;
            font-size: 0.9rem;
        }

        .keyboard-hint {
            background: rgba(108, 117, 125, 0.1);
            padding: 8px 16px;
            border-radius: 10px;
            margin-top: 10px;
            display: inline-block;
        }

        @media (max-width: 480px) {
            .calculator {
                padding: 15px;
            }
            
            button {
                padding: 15px;
                font-size: 1.1rem;
            }
            
            .current-operand {
                font-size: 2rem;
            }
        }

        .pressed {
            transform: scale(0.95);
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="calculator">
        <div class="display">
            <div class="display-overlay"></div>
            <div class="previous-operand" id="previous-operand"></div>
            <div class="current-operand" id="current-operand">0</div>
        </div>
        
        <div class="buttons-grid">
            <button class="clear-btn" onclick="clearAll()">AC</button>
            <button class="operation-btn" onclick="deleteLast()">⌫</button>
            <button class="operation-btn" onclick="appendOperation('÷')">÷</button>
            <button class="operation-btn" onclick="appendOperation('×')">×</button>
            
            <button class="number-btn" onclick="appendNumber('7')">7</button>
            <button class="number-btn" onclick="appendNumber('8')">8</button>
            <button class="number-btn" onclick="appendNumber('9')">9</button>
            <button class="operation-btn" onclick="appendOperation('-')">-</button>
            
            <button class="number-btn" onclick="appendNumber('4')">4</button>
            <button class="number-btn" onclick="appendNumber('5')">5</button>
            <button class="number-btn" onclick="appendNumber('6')">6</button>
            <button class="operation-btn" onclick="appendOperation('+')">+</button>
            
            <button class="number-btn" onclick="appendNumber('1')">1</button>
            <button class="number-btn" onclick="appendNumber('2')">2</button>
            <button class="number-btn" onclick="appendNumber('3')">3</button>
            <button class="number-btn" onclick="appendNumber('0')">0</button>
            
            <button class="decimal-btn" onclick="appendDecimal()">.</button>
            <button class="equals-btn" onclick="calculate()">=</button>
        </div>
        
        <div class="footer">
            <div>Modern Calculator</div>
            <div class="keyboard-hint">Press keys 0-9, +, -, *, /, Enter, Backspace</div>
        </div>
    </div>

    <script>
        let currentOperand = '0';
        let previousOperand = '';
        let operation = null;
        let shouldResetScreen = false;

        function updateDisplay() {
            const currentOperandElement = document.getElementById('current-operand');
            const previousOperandElement = document.getElementById('previous-operand');
            
            currentOperandElement.textContent = formatDisplayNumber(currentOperand);
            
            if (operation) {
                previousOperandElement.textContent = `${formatDisplayNumber(previousOperand)} ${operation}`;
            } else {
                previousOperandElement.textContent = previousOperand;
            }
        }

        function formatDisplayNumber(number) {
            if (number === 'Error') return 'Error';
            if (number === 'Infinity') return '∞';
            
            const stringNumber = number.toString();
            const integerDigits = parseFloat(stringNumber.split('.')[0]);
            const decimalDigits = stringNumber.split('.')[1];
            
            let integerDisplay;
            
            if (isNaN(integerDigits)) {
                integerDisplay = '';
            } else {
                integerDisplay = integerDigits.toLocaleString('en', { maximumFractionDigits: 0 });
            }
            
            if (decimalDigits != null) {
                return `${integerDisplay}.${decimalDigits}`;
            } else {
                return integerDisplay;
            }
        }

        function appendNumber(number) {
            if (shouldResetScreen) {
                currentOperand = '';
                shouldResetScreen = false;
            }
            
            if (currentOperand === '0' && number !== '.') {
                currentOperand = number;
            } else {
                currentOperand += number;
            }
            updateDisplay();
        }

        function appendDecimal() {
            if (shouldResetScreen) {
                currentOperand = '0.';
                shouldResetScreen = false;
                updateDisplay();
                return;
            }
            
            if (!currentOperand.includes('.')) {
                currentOperand += '.';
                updateDisplay();
            }
        }

        function appendOperation(op) {
            if (currentOperand === '') return;
            
            if (previousOperand !== '') {
                calculate();
            }
            
            operation = op;
            previousOperand = currentOperand;
            currentOperand = '';
            shouldResetScreen = false;
            updateDisplay();
        }

        function calculate() {
            if (operation === null || previousOperand === '' || currentOperand === '') return;
            
            let result;
            const prev = parseFloat(previousOperand);
            const current = parseFloat(currentOperand);
            
            if (isNaN(prev) || isNaN(current)) return;
            
            switch (operation) {
                case '+':
                    result = prev + current;
                    break;
                case '-':
                    result = prev - current;
                    break;
                case '×':
                    result = prev * current;
                    break;
                case '÷':
                    if (current === 0) {
                        currentOperand = 'Error';
                        previousOperand = '';
                        operation = null;
                        updateDisplay();
                        return;
                    }
                    result = prev / current;
                    break;
                default:
                    return;
            }
            
            currentOperand = result.toString();
            operation = null;
            previousOperand = '';
            shouldResetScreen = true;
            updateDisplay();
        }

        function clearAll() {
            currentOperand = '0';
            previousOperand = '';
            operation = null;
            shouldResetScreen = false;
            updateDisplay();
        }

        function deleteLast() {
            if (currentOperand.length === 1 || (currentOperand.length === 2 && currentOperand.startsWith('-'))) {
                currentOperand = '0';
            } else {
                currentOperand = currentOperand.slice(0, -1);
            }
            updateDisplay();
        }

        // Keyboard support
        document.addEventListener('keydown', (event) => {
            const key = event.key;
            
            switch (key) {
                case '0': case '1': case '2': case '3': case '4':
                case '5': case '6': case '7': case '8': case '9':
                    appendNumber(key);
                    addButtonPressEffect(document.querySelector(`button:contains('${key}')`));
                    break;
                case '+':
                    appendOperation('+');
                    addButtonPressEffect(document.querySelector('[onclick*="appendOperation(\'+\')"]'));
                    break;
                case '-':
                    appendOperation('-');
                    addButtonPressEffect(document.querySelector('[onclick*="appendOperation(\'-\')"]'));
                    break;
                case '*':
                    appendOperation('×');
                    addButtonPressEffect(document.querySelector('[onclick*="appendOperation(\'×\')"]'));
                    break;
                case '/':
                    appendOperation('÷');
                    addButtonPressEffect(document.querySelector('[onclick*="appendOperation(\'÷\')"]'));
                    break;
                case '.':
                    appendDecimal();
                    addButtonPressEffect(document.querySelector('[onclick*="appendDecimal"]'));
                    break;
                case 'Enter': case '=':
                    calculate();
                    addButtonPressEffect(document.querySelector('[onclick*="calculate"]'));
                    break;
                case 'Backspace':
                    deleteLast();
                    addButtonPressEffect(document.querySelector('[onclick*="deleteLast"]'));
                    break;
                case 'Escape':
                    clearAll();
                    addButtonPressEffect(document.querySelector('[onclick*="clearAll"]'));
                    break;
            }
        });

        function addButtonPressEffect(button) {
            if (button) {
                button.classList.add('pressed');
                setTimeout(() => {
                    button.classList.remove('pressed');
                }, 100);
            }
        }

        // Helper function to find button by text content
        document.querySelectorAll('button').forEach(btn => {
            btn.__originalText = btn.textContent;
        });

        // Initialize display
        updateDisplay();
    </script>
</body>
</html>
